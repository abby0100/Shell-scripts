#!/bin/bash

date

#sudo -s
#cd /sys/kernel/debug/tracing/
#cat -n available_filter_functions | ag copy_mnt_ns
#cat -n available_filter_functions | ag do_mount


# 1. function tracer (not valified)

#echo
#sudo echo copy_mnt_ns do_mount > /sys/kernel/debug/tracing/set_ftrace_filter
#cat -n /sys/kernel/debug/tracing/set_ftrace_filter
#
#echo
#echo function > /sys/kernel/debug/tracing/current_tracer
#cat -n /sys/kernel/debug/tracing/current_tracer


# 2. function graph tracer (valified)

# use root with sudo -s
echo function_graph > /sys/kernel/debug/tracing/current_tracer
cat -n /sys/kernel/debug/tracing/current_tracer

echo
echo do_mount copy_mnt_ns  > /sys/kernel/debug/tracing/set_graph_function
#echo copy_mnt_ns do_mount > /sys/kernel/debug/tracing/set_graph_function
#echo copy_mnt_ns > /sys/kernel/debug/tracing/set_graph_function
#echo do_mount > /sys/kernel/debug/tracing/set_graph_function
cat -n /sys/kernel/debug/tracing/set_graph_function

#cat -n /sys/kernel/debug/tracing/trace


# echo function > current_tracer
# echo 1 > tracing_on
# usleep 1
# echo 0 > tracing_on
# cat trace

